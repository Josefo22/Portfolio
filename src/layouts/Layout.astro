---
interface Props {
	title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content="Portfolio de Juan José - Desarrollador Full Stack" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
		<meta name="theme-color" content="#10b981" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
		<meta name="format-detection" content="telephone=no" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<title>{title}</title>
		<!-- Prevenir el parpadeo inicial -->
		<script is:inline>
			(function() {
				try {
					const theme = localStorage.getItem('color-theme');
					const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
					if (theme === 'dark' || (!theme && systemDark)) {
						document.documentElement.classList.add('dark');
						console.log('Tema oscuro aplicado en la inicialización');
					} else {
						document.documentElement.classList.remove('dark');
						console.log('Tema claro aplicado en la inicialización');
					}
				} catch (e) {
					console.error('Error al inicializar tema:', e);
				}
			})();
		</script>
	</head>
	<body>
		<slot />
	</body>
</html>

<style is:global>
	:root {
		--font-size-base: clamp(1rem, 0.34vw + 0.91rem, 1.19rem);
		--font-size-lg: clamp(1.2rem, 0.7vw + 1.2rem, 1.5rem);
		--font-size-xl: clamp(2.44rem, 2.38vw + 1.85rem, 3.75rem);
		--color-text: hsl(12, 5%, 4%);
		--color-bg: hsl(0, 0%, 98%);
		--color-border: hsl(0, 0%, 80%);
	}

	html {
		font-family: -apple-system, BlinkMacSystemFont, system-ui, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
		font-size: var(--font-size-base);
		color: var(--color-text);
		background-color: var(--color-bg);
		scroll-behavior: smooth;
		-webkit-text-size-adjust: 100%;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		-webkit-tap-highlight-color: transparent;
		overflow-x: hidden;
		width: 100%;
		height: 100%;
		overflow-y: auto;
	}

	html.dark {
		--color-text: hsl(0, 0%, 98%);
		--color-bg: hsl(215, 28%, 17%);
		--color-border: hsl(215, 20%, 25%);
		color-scheme: dark;
	}

	body {
		margin: 0;
		padding: 0;
		box-sizing: border-box;
		min-height: 100vh;
		width: 100%;
		overflow-x: hidden;
		overflow-y: hidden; /* Eliminar scrollbar del body */
		position: relative;
	}

	main {
		position: relative;
		width: 100%;
		height: auto;
		min-height: 100vh;
		display: block;
		overflow: visible;
	}

	section {
		position: relative;
		width: 100%;
		height: auto;
		display: block !important;
		visibility: visible !important;
		opacity: 1 !important;
	}

	/* Ajustar los colores de fondo para mayor contraste en modo oscuro */
	.dark .bg-gray-50 {
		background-color: hsl(215, 28%, 17%);
	}

	.dark .bg-gray-100 {
		background-color: hsl(215, 28%, 17%);
	}

	.dark .bg-gray-900 {
		background-color: hsl(215, 30%, 15%);
	}

	.dark .text-gray-800 {
		color: hsl(0, 0%, 98%);
	}

	@supports (-webkit-touch-callout: none) {
		body {
			/* Mejorar scroll en iOS */
			-webkit-overflow-scrolling: touch;
		}
	}

	@media (prefers-reduced-motion: reduce) {
		html {
			scroll-behavior: auto;
		}

		*,
		*::before,
		*::after {
			animation-duration: 0.01ms !important;
			animation-iteration-count: 1 !important;
			transition-duration: 0.01ms !important;
			scroll-behavior: auto !important;
		}
	}

	/* Arreglo específico para asegurar que todas las secciones sean visibles */
	#about, #skills, #projects, #contact {
		display: block !important;
		visibility: visible !important;
		opacity: 1 !important;
		position: relative !important;
		z-index: 1 !important;
		height: auto !important;
		min-height: auto !important;
		width: 100% !important;
		margin: 0 !important;
		padding: 2rem 0 !important;
	}

	/* Eliminar posibles conflictos de posicionamiento */
	.section-container {
		position: relative !important;
		transform: none !important;
		display: block !important;
		height: auto !important;
		width: 100% !important;
		margin: 0 !important;
		padding: 1rem !important;
		overflow: visible !important;
	}
	
	/* Estilo personalizado para scrollbars - SOLO EN HTML */
	html::-webkit-scrollbar {
		width: 8px;
	}
	
	html::-webkit-scrollbar-track {
		background: #f3f4f6;
	}
	
	html::-webkit-scrollbar-thumb {
		background-color: #10b981;
		border-radius: 4px;
	}
	
	html.dark::-webkit-scrollbar-track {
		background: #1f2937;
	}
	
	html.dark::-webkit-scrollbar-thumb {
		background-color: #059669;
	}
	
	/* Configuración de scrollbar para Firefox */
	html {
		scrollbar-width: thin;
		scrollbar-color: #10b981 #f3f4f6;
	}
	
	html.dark {
		scrollbar-color: #059669 #1f2937;
	}
	
	/* Ocultar scrollbars adicionales en todos los componentes */
	body, main, section, div, nav, aside, footer, header {
		scrollbar-width: none;
	}
	
	body::-webkit-scrollbar,
	main::-webkit-scrollbar,
	section::-webkit-scrollbar,
	div::-webkit-scrollbar,
	nav::-webkit-scrollbar,
	aside::-webkit-scrollbar,
	footer::-webkit-scrollbar,
	header::-webkit-scrollbar {
		display: none !important;
		width: 0 !important;
		height: 0 !important;
	}
	
	/* Fix para contenedores fixed/absolute */
	.fixed, .absolute {
		overflow: visible !important;
	}
</style>
